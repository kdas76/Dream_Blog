# # Use official Node.js image
# FROM node:18

# # Set working directory
# WORKDIR /usr/src/app

# # Copy backend package files and install dependencies
# COPY package.json ./
# RUN npm install

# # Copy the rest of the backend code
# COPY . .

# # Expose port
# EXPOSE 5000

# # Start the server
# CMD ["npm", "start"]











# 1ï¸âƒ£ Start from official Node.js image
FROM node:22
# ğŸ” WHY: Provides Node runtime + npm preinstalled.
# ğŸš« Without it: The container wonâ€™t understand â€œnodeâ€ or â€œnpmâ€ commands.

# 2ï¸âƒ£ Set working directory inside container
WORKDIR /usr/src/app
# ğŸ” WHY: All future paths (COPY, RUN) are relative here.
# ğŸš« Without it: Files copy to random root folders; code wonâ€™t run correctly.

# 3ï¸âƒ£ Copy package.json and install dependencies
COPY package*.json ./
RUN npm install
# ğŸ” WHY: Install only what's in package.json (express, dotenv, etc.)
# ğŸš« Without it: Server wonâ€™t have libraries like express, pg, etc.

# 4ï¸âƒ£ Copy rest of backend code
COPY . .
# ğŸ” WHY: Brings in your index.js, routes, uploads, etc.
# ğŸš« Without it: Container would only have dependencies, no code to run.

# 5ï¸âƒ£ Expose the backend port
EXPOSE 5000
# ğŸ” WHY: Makes port 5000 accessible from host.
# ğŸš« Without it: Container runs internally, but nothing reaches localhost.

# 6ï¸âƒ£ Run the backend
CMD ["npm", "start"]
# ğŸ” WHY: Uses â€œstartâ€ script in package.json (node index.js)
# ğŸš« Without it: Container starts, then does nothing and stops.
