# FROM node:18

# WORKDIR /usr/src/app

# COPY package*.json ./
# RUN npm install

# COPY . .

# # Build the React app
# RUN npm run build

# # Serve using a lightweight HTTP server
# RUN npm install -g serve

# EXPOSE 3000
# CMD ["serve", "-s", "build", "-l", "3000"]



# 1ï¸âƒ£ Base image
FROM node:22
# ğŸ” WHY: Same Node.js environment as dev; ensures npm + vite work.

# 2ï¸âƒ£ Set working directory
WORKDIR /usr/src/app

# 3ï¸âƒ£ Copy package files and install deps
COPY package*.json ./
RUN npm install
# ğŸ” WHY: Installs React, Vite, Tailwind, etc.
# ğŸš« Without it: `npm run build` will fail instantly.

# 4ï¸âƒ£ Copy rest of frontend source
COPY . .

# 5ï¸âƒ£ Build optimized React app
RUN npm run build
# ğŸ” WHY: Creates production â€œdist/â€ folder.
# ğŸš« Without it: Thereâ€™s no static site to serve.

# 6ï¸âƒ£ Install a lightweight static server
RUN npm install -g serve
# ğŸ” WHY: Needed to host the built files.
# ğŸš« Without it: App would build but never display in browser.

# 7ï¸âƒ£ Expose frontend port
EXPOSE 3000
# ğŸ” WHY: Makes the container reachable from host at port 3000.

# 8ï¸âƒ£ Default command to start server
CMD ["serve", "-s", "dist", "-l", "3000"]
# ğŸ” WHY: Serve the built site.
# ğŸš« Without it: Container exits right after building.
